(this["webpackJsonpmy-custom-template-project"]=this["webpackJsonpmy-custom-template-project"]||[]).push([[0],{122:function(e,t){},146:function(e,t,n){},147:function(e,t,n){},155:function(e,t){},157:function(e,t){},186:function(e,t){},188:function(e,t){},211:function(e,t){},226:function(e,t,n){"use strict";n.r(t);var c=n(0),o=n.n(c),i=n(128),s=n.n(i),a=(n(146),n(5)),r=n(4),u=(n(147),n(43)),j=n(266),l=n(275),b=n(132),d=n.n(b),f="wss://junyan:elite_392101@mqtt.longan.link:8084/mqtt",g={passage:"LonganCore1",message:{Up:"Up",Down:"Down",Left:"Left",Right:"Right",Stop:"Stop",Lifting:"Lifting",Pitching:"Pitching"}},h={passage:"LonganCore2",message:{Up:"Up",Down:"Down",Left:"Left",Right:"Right",Stop:"Stop",Lifting:"Lifting",Pitching:"Pitching"}},O={passage:"LonganCore3",message:{one:"Up",two:"Down",three:"Left",four:"Right",five:"five",six:"six"}},x={passage:"LonganCore4",message:{one:"Up",two:"Down",three:"Left",four:"Right",five:"five",six:"six"}},p=n(73),m=n.n(p),v=n(274),w=n(264),S=n(277),C=n(279),k="/",L="/First-car",y="/Second-car",E="/Third-car",R="/Fourth-car",T=n(2),F=[g.passage,h.passage,O.passage,x.passage],D=[L,y,E,R],I=null,P=!1,U=function(){var e=Object(r.m)(),t=c.useState(!1),n=Object(a.a)(t,2),o=n[0],i=n[1],s=function(){i(!1)},b=Object(c.useState)(null),g=Object(a.a)(b,2),h=g[0],O=g[1],x=Object(c.useState)(""),p=Object(a.a)(x,2),k=p[0],L=p[1],y=c.useState(!1),E=Object(a.a)(y,2),R=E[0],U=E[1],M=c.useState(void 0),A=Object(a.a)(M,2),W=A[0],_=A[1],q="",B=["\u8be5\u673a\u5668\u88ab\u4f7f\u7528\u4e2d,\u8bf7\u7a0d\u540e\u518d\u8bd5...","\u8be5\u673a\u5668\u6ca1\u7535\u4e86..."],J=function(e){return Object(T.jsx)(w.a,Object(u.a)(Object(u.a)({},e),{},{direction:"down",message:q}))},H=function(e){U(!0),_((function(){return e}))};Object(c.useEffect)((function(){var e=m.a.connect(f);O(e)}),[]);var G=function(e){i(!0),P=!0,console.log("true_isclick",P),h.subscribe(e,(function(t){t||(h.publish(e,"Request"),I=setTimeout((function(){P=!1,console.log("null_isclick",P),s(),q=B[1],H(J)}),5e3))}))},K=function(t,n){var c=n.toString();console.log("\u63a5\u6536\u5230\u7684\u6d88\u606f",c,P),1==P&&("Ok"==c?(s(),clearTimeout(I),P=!1,console.log("ok_isClick",P),L((function(t){return e(t),t}))):"Error"==c&&(s(),clearTimeout(I),q=B[0],H(J),P=!1,console.log("error_isClick",P)))};return Object(c.useEffect)((function(){if(h)return h.on("message",K),function(){h.off("message",K)}}),[h]),Object(T.jsx)(T.Fragment,{children:Object(T.jsxs)(j.a,{sx:z,children:[Object(T.jsxs)(j.a,{children:[Object(T.jsx)("h1",{children:"Elite ESP32 Car"}),Object(T.jsx)("h3",{children:k})]}),Object(T.jsx)(S.a,{sx:{color:"#fff",zIndex:function(e){return e.zIndex.drawer+1}},open:o,children:Object(T.jsx)(C.a,{color:"inherit"})}),Object(T.jsx)(v.a,{open:R,onClose:function(){U(!1)},TransitionComponent:W,message:"I love snacks"},W?W.name:""),Object(T.jsx)(l.a,{sx:{width:"60%"},container:!0,children:D.map((function(e,t){return Object(T.jsxs)(l.a,{sx:{background:"lightcoral",borderRadius:"16px",margin:1,display:"flex",alignContent:"center",flexDirection:"column",alignItems:"center",justifyContent:"center"},xs:5,onClick:function(){L(e),G(F[t])},children:[Object(T.jsx)(j.a,{children:Object(T.jsx)(d.a,{sx:{fontSize:40}})}),Object(T.jsx)(j.a,{children:e})]},t)}))})]})})},z={height:"80vh",display:"flex",justifyContent:"space-between"},M=n(8),A=n(280),W=n(133),_=n(273);var q={userSelect:"none",mt:4,mb:4,fullWidth:!0,height:50},B=function(e){var t=e.urlStr,n=e.passage,o=Object(r.m)(),i=Object(c.useRef)(null);Object(c.useEffect)((function(){return i.current=m.a.connect(t),i.current.on("connect",(function(){console.log("Connected to MQTT broker")})),function(){i.current.end()}}),[]);var s=Object(c.useState)("onTouchStart"),l=Object(a.a)(s,2),b=l[0],d=l[1],f=Object(c.useState)("onTouchEnd"),g=Object(a.a)(f,2),h=(g[0],g[1]);Object(c.useEffect)((function(){"undefined"!==typeof window&&("ontouchstart"in window?(d("onTouchStart"),h("onTouchEnd")):(d("onMouseDown"),h("onMouseUp")))}),[]);var O=Object(c.useState)(10),x=Object(a.a)(O,2),p=x[0],v=x[1];Object(c.useEffect)((function(){var e=setInterval((function(){v((function(e){return e-1}))}),1e3);return 0==p&&o("/"),function(){return clearInterval(e)}}),[p]);var w=function(e){i.current.publish(n,e)},S=e.message,C=S.Up,k=S.Down,L=S.Left,y=S.Right,E=S.Stop,R=S.Lifting,F=S.Pitching,D=["FORWARD","BACKWARD","LEFT","RIGHT","STOP"],I=Object(c.useState)(""),P=Object(a.a)(I,2),U=P[0],z=P[1];return Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)("button",{onClick:function(){return v(10)},children:p}),Object(T.jsx)(j.a,{children:U}),Object(T.jsx)(A.a,{}),Object(T.jsxs)(j.a,{sx:{height:"80vh",justifyContent:"space-around",display:"flex",alignContent:"center",alignItems:"center",background:"lightcoral"},children:[Object(T.jsx)(j.a,{children:Object(T.jsx)(W.Joystick,{size:150,stickSize:70,sticky:!1,baseColor:"rgb(0, 0, 51,0.2)",stickColor:"rgba(133, 37, 60, 0.8)",move:function(e){return function(e){v(10);var t=e.direction;U!==t&&(t==D[0]?w(C):t==D[1]?w(k):t==D[2]?w(L):t==D[3]&&w(y),z(t))}(e)},stop:function(){z(D[4]),w(E)},start:function(){}})}),Object(T.jsxs)(j.a,{sx:{width:250},children:[Object(T.jsx)(_.a,Object(u.a)(Object(u.a)({sx:q,variant:"outlined",size:"large",fullWidth:!0},Object(M.a)({},b,(function(){w(R),v(10)}))),{},{children:"\u5347/\u964d"})),Object(T.jsx)(_.a,Object(u.a)(Object(u.a)({sx:q,variant:"outlined",size:"large",fullWidth:!0},Object(M.a)({},b,(function(){w(F),v(10)}))),{},{children:"\u5939\u7403"}))]})]})]})},J=function(){return Object(T.jsxs)("div",{children:["FirstCar",Object(T.jsx)(B,{urlStr:f,passage:g.passage,message:g.message})]})},H=function(){return Object(T.jsxs)("div",{children:["SecondCar",Object(T.jsx)(B,{urlStr:f,passage:h.passage,message:h.message})]})},G=function(){return Object(T.jsxs)("div",{children:["ThirdCar",Object(T.jsx)(B,{urlStr:f,passage:O.passage,message:O.message})]})},K=n(271),Q=function(){return Object(T.jsxs)("div",{children:["FourthCar",Object(T.jsx)(K.a,{children:Object(T.jsx)(B,{urlStr:f,passage:x.passage,message:x.message})})]})},N=function(e){var t=e.children,n=Object(r.m)();return Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)(j.a,{sx:{height:"10vh"},children:Object(T.jsx)(_.a,{onClick:function(){n("/")},children:"AIM ESP32 HOME"})}),t]})},V=n(278),X=n(272),Y={borderRadius:"22px",position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"70%",bgcolor:"background.paper",boxShadow:24,p:4};var Z=function(){var e=c.useState(!0),t=Object(a.a)(e,2),n=t[0],o=t[1];return Object(c.useEffect)((function(){var e=function(){"landscape-primary"===window.screen.orientation.type||"landscape-secondary"===window.screen.orientation.type||90===window.screen.orientation.angle||-90===window.screen.orientation.angle?(o(!1),console.log("Landscape")):(o(!0),console.log("Portrait"))};return e(),window.addEventListener("orientationchange",e),function(){window.removeEventListener("orientationchange",e)}}),[]),Object(T.jsxs)(N,{children:[Object(T.jsx)(X.a,{open:n,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",disableAutoFocus:!0,sx:{borderRadius:"22px",background:"lightcoral"},children:Object(T.jsxs)(j.a,{sx:Y,children:[Object(T.jsx)(V.a,{id:"modal-modal-title",variant:"h6",component:"h2",children:"\u5c4f\u5e55\u5e94\u6a2a\u5411\u5c55\u793a"}),Object(T.jsx)(V.a,{id:"modal-modal-description",sx:{mt:2},children:"\u8bf7\u5728\u63a7\u5236\u4e2d\u5fc3\uff0c\u8bbe\u7f6e\u5c4f\u5e55\u4e3a\u65cb\u8f6c\u6a21\u5f0f\uff0c\u5e76\u6a2a\u5411\u8f6c\u52a8\uff0c\u5373\u523b\u4f53\u9a8c"})]})}),Object(T.jsxs)(r.c,{children:[Object(T.jsx)(r.a,{index:!0,path:"".concat(k),element:Object(T.jsx)(U,{})}),Object(T.jsx)(r.a,{path:"".concat(L),element:Object(T.jsx)(J,{})}),Object(T.jsx)(r.a,{path:"".concat(y),element:Object(T.jsx)(H,{})}),Object(T.jsx)(r.a,{path:"".concat(E),element:Object(T.jsx)(G,{})}),Object(T.jsx)(r.a,{path:"".concat(R),element:Object(T.jsx)(Q,{})})]})]})},$=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,281)).then((function(t){var n=t.getCLS,c=t.getFID,o=t.getFCP,i=t.getLCP,s=t.getTTFB;n(e),c(e),o(e),i(e),s(e)}))},ee=n(45);s.a.createRoot(document.getElementById("root")).render(Object(T.jsx)(o.a.StrictMode,{children:Object(T.jsx)(ee.a,{children:Object(T.jsx)(Z,{})})})),$()}},[[226,1,2]]]);
//# sourceMappingURL=main.f31fd970.chunk.js.map