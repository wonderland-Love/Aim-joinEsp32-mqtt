(this["webpackJsonpmy-custom-template-project"]=this["webpackJsonpmy-custom-template-project"]||[]).push([[0],{122:function(e,t){},146:function(e,t,n){},147:function(e,t,n){},155:function(e,t){},157:function(e,t){},186:function(e,t){},188:function(e,t){},211:function(e,t){},226:function(e,t,n){"use strict";n.r(t);var c=n(0),i=n.n(c),o=n(128),s=n.n(o),a=(n(146),n(5)),r=n(4),u=(n(147),n(43)),j=n(266),l=n(275),b=n(132),d=n.n(b),f="wss://junyan:elite_392101@mqtt.longan.link:8084/mqtt",g={passage:"LonganCore1",message:{Up:"Up",Down:"Down",Left:"Left",Right:"Right",Stop:"Stop",Lifting:"Lifting",Pitching:"Pitching"}},h={passage:"LonganCore2",message:{Up:"Up",Down:"Down",Left:"Left",Right:"Right",Stop:"Stop",Lifting:"Lifting",Pitching:"Pitching"}},O={passage:"LonganCore3",message:{Up:"Up",Down:"Down",Left:"Left",Right:"Right",Stop:"Stop",Lifting:"Lifting",Pitching:"Pitching"}},x={passage:"LonganCore4",message:{Up:"Up",Down:"Down",Left:"Left",Right:"Right",Stop:"Stop",Lifting:"Lifting",Pitching:"Pitching"}},p=n(73),m=n.n(p),S=n(274),v=n(264),w=n(277),C=n(279),L="/",k="/First-car",R="/Second-car",E="/Third-car",T="/Fourth-car",y=n(2),P=[g.passage,h.passage,O.passage,x.passage],D=[k,R,E,T],F=null,I=!1,U=function(){var e=Object(r.m)(),t=c.useState(!1),n=Object(a.a)(t,2),i=n[0],o=n[1],s=function(){o(!1)},b=Object(c.useState)(null),g=Object(a.a)(b,2),h=g[0],O=g[1],x=Object(c.useState)(""),p=Object(a.a)(x,2),L=p[0],k=p[1],R=c.useState(!1),E=Object(a.a)(R,2),T=E[0],U=E[1],M=c.useState(void 0),A=Object(a.a)(M,2),W=A[0],_=A[1],q="",B=["\u8be5\u673a\u5668\u88ab\u4f7f\u7528\u4e2d,\u8bf7\u7a0d\u540e\u518d\u8bd5...","\u8be5\u673a\u5668\u6ca1\u7535\u4e86..."],J=function(e){return Object(y.jsx)(v.a,Object(u.a)(Object(u.a)({},e),{},{direction:"down",message:q}))},H=function(e){U(!0),_((function(){return e}))};Object(c.useEffect)((function(){var e=m.a.connect(f);O(e)}),[]);var G=function(e){o(!0),I=!0,console.log("true_isclick",I),h.subscribe(e,(function(t){t||(h.publish(e,"Request"),F=setTimeout((function(){I=!1,console.log("null_isclick",I),s(),q=B[1],H(J)}),5e3))}))},K=function(t,n){var c=n.toString();console.log("\u63a5\u6536\u5230\u7684\u6d88\u606f",c,I),1==I&&("Ok"==c?(s(),clearTimeout(F),I=!1,console.log("ok_isClick",I),k((function(t){return e(t),t}))):"Error"==c&&(s(),clearTimeout(F),q=B[0],H(J),I=!1,console.log("error_isClick",I)))};return Object(c.useEffect)((function(){if(h)return h.on("message",K),function(){h.off("message",K)}}),[h]),Object(y.jsx)(y.Fragment,{children:Object(y.jsxs)(j.a,{sx:z,children:[Object(y.jsxs)(j.a,{children:[Object(y.jsx)("h1",{children:"Elite ESP32 Car"}),Object(y.jsx)("h3",{children:L})]}),Object(y.jsx)(w.a,{sx:{color:"#fff",zIndex:function(e){return e.zIndex.drawer+1}},open:i,children:Object(y.jsx)(C.a,{color:"inherit"})}),Object(y.jsx)(S.a,{open:T,onClose:function(){U(!1)},TransitionComponent:W,message:"I love snacks"},W?W.name:""),Object(y.jsx)(l.a,{sx:{width:"60%"},container:!0,children:D.map((function(e,t){return Object(y.jsxs)(l.a,{sx:{background:"lightcoral",borderRadius:"16px",margin:1,display:"flex",alignContent:"center",flexDirection:"column",alignItems:"center",justifyContent:"center"},xs:5,onClick:function(){k(e),G(P[t])},children:[Object(y.jsx)(j.a,{children:Object(y.jsx)(d.a,{sx:{fontSize:40}})}),Object(y.jsx)(j.a,{children:e})]},t)}))})]})})},z={height:"80vh",display:"flex",justifyContent:"space-between"},M=n(8),A=n(280),W=n(133),_=n(273);var q={userSelect:"none",mt:4,mb:4,fullWidth:!0,height:50},B=function(e){var t=e.urlStr,n=e.passage,i=Object(r.m)(),o=Object(c.useRef)(null);Object(c.useEffect)((function(){return o.current=m.a.connect(t),o.current.on("connect",(function(){console.log("Connected to MQTT broker")})),function(){o.current.end()}}),[]);var s=Object(c.useState)("onTouchStart"),l=Object(a.a)(s,2),b=l[0],d=l[1],f=Object(c.useState)("onTouchEnd"),g=Object(a.a)(f,2),h=(g[0],g[1]);Object(c.useEffect)((function(){"undefined"!==typeof window&&("ontouchstart"in window?(d("onTouchStart"),h("onTouchEnd")):(d("onMouseDown"),h("onMouseUp")))}),[]);var O=Object(c.useState)(10),x=Object(a.a)(O,2),p=x[0],S=x[1];Object(c.useEffect)((function(){var e=setInterval((function(){S((function(e){return e-1}))}),1e3);return 0==p&&i("/"),function(){return clearInterval(e)}}),[p]);var v=function(e){o.current.publish(n,e)},w=e.message,C=w.Up,L=w.Down,k=w.Left,R=w.Right,E=w.Stop,T=w.Lifting,P=w.Pitching,D=["FORWARD","BACKWARD","LEFT","RIGHT","STOP"],F=Object(c.useState)(""),I=Object(a.a)(F,2),U=I[0],z=I[1];return Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)("button",{onClick:function(){return S(10)},children:p}),Object(y.jsx)(j.a,{children:U}),Object(y.jsx)(A.a,{}),Object(y.jsxs)(j.a,{sx:{height:"80vh",justifyContent:"space-around",display:"flex",alignContent:"center",alignItems:"center",background:"lightcoral"},children:[Object(y.jsx)(j.a,{children:Object(y.jsx)(W.Joystick,{size:150,stickSize:70,sticky:!1,baseColor:"rgb(0, 0, 51,0.2)",stickColor:"rgba(133, 37, 60, 0.8)",move:function(e){return function(e){S(10);var t=e.direction;U!==t&&(t==D[0]?v(C):t==D[1]?v(L):t==D[2]?v(k):t==D[3]&&v(R),z(t))}(e)},stop:function(){z(D[4]),v(E)},start:function(){}})}),Object(y.jsxs)(j.a,{sx:{width:250},children:[Object(y.jsx)(_.a,Object(u.a)(Object(u.a)({sx:q,variant:"outlined",size:"large",fullWidth:!0},Object(M.a)({},b,(function(){v(T),S(10)}))),{},{children:"\u5347/\u964d"})),Object(y.jsx)(_.a,Object(u.a)(Object(u.a)({sx:q,variant:"outlined",size:"large",fullWidth:!0},Object(M.a)({},b,(function(){v(P),S(10)}))),{},{children:"\u5939\u7403"}))]})]})]})},J=function(){return Object(y.jsxs)("div",{children:["FirstCar",Object(y.jsx)(B,{urlStr:f,passage:g.passage,message:g.message})]})},H=function(){return Object(y.jsxs)("div",{children:["SecondCar",Object(y.jsx)(B,{urlStr:f,passage:h.passage,message:h.message})]})},G=function(){return Object(y.jsxs)("div",{children:["ThirdCar",Object(y.jsx)(B,{urlStr:f,passage:O.passage,message:O.message})]})},K=n(271),Q=function(){return Object(y.jsxs)("div",{children:["FourthCar",Object(y.jsx)(K.a,{children:Object(y.jsx)(B,{urlStr:f,passage:x.passage,message:x.message})})]})},N=function(e){var t=e.children,n=Object(r.m)();return Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)(j.a,{sx:{height:"10vh"},children:Object(y.jsx)(_.a,{onClick:function(){n("/")},children:"AIM ESP32 HOME"})}),t]})},V=n(278),X=n(272),Y={borderRadius:"22px",position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"70%",bgcolor:"background.paper",boxShadow:24,p:4};var Z=function(){var e=c.useState(!0),t=Object(a.a)(e,2),n=t[0],i=t[1];return Object(c.useEffect)((function(){var e=function(){window.matchMedia("(orientation: landscape)").matches?(i(!1),console.log("Landscape")):(i(!0),console.log("Portrait"))};return e(),window.addEventListener("orientationchange",e),function(){window.removeEventListener("orientationchange",e)}}),[]),Object(y.jsxs)(N,{children:[Object(y.jsx)(X.a,{open:n,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",disableAutoFocus:!0,sx:{borderRadius:"22px",background:"lightcoral"},children:Object(y.jsxs)(j.a,{sx:Y,children:[Object(y.jsx)(V.a,{id:"modal-modal-title",variant:"h6",component:"h2",children:"\u5c4f\u5e55\u5e94\u6a2a\u5411\u5c55\u793a"}),Object(y.jsx)(V.a,{id:"modal-modal-description",sx:{mt:2},children:"\u8bf7\u5728\u63a7\u5236\u4e2d\u5fc3\uff0c\u8bbe\u7f6e\u5c4f\u5e55\u4e3a\u65cb\u8f6c\u6a21\u5f0f\uff0c\u5e76\u6a2a\u5411\u8f6c\u52a8\uff0c\u5373\u523b\u4f53\u9a8c"})]})}),Object(y.jsxs)(r.c,{children:[Object(y.jsx)(r.a,{index:!0,path:"".concat(L),element:Object(y.jsx)(U,{})}),Object(y.jsx)(r.a,{path:"".concat(k),element:Object(y.jsx)(J,{})}),Object(y.jsx)(r.a,{path:"".concat(R),element:Object(y.jsx)(H,{})}),Object(y.jsx)(r.a,{path:"".concat(E),element:Object(y.jsx)(G,{})}),Object(y.jsx)(r.a,{path:"".concat(T),element:Object(y.jsx)(Q,{})})]})]})},$=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,281)).then((function(t){var n=t.getCLS,c=t.getFID,i=t.getFCP,o=t.getLCP,s=t.getTTFB;n(e),c(e),i(e),o(e),s(e)}))},ee=n(45);s.a.createRoot(document.getElementById("root")).render(Object(y.jsx)(i.a.StrictMode,{children:Object(y.jsx)(ee.a,{children:Object(y.jsx)(Z,{})})})),$()}},[[226,1,2]]]);
//# sourceMappingURL=main.5f265506.chunk.js.map